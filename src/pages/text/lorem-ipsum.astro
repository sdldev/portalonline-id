---
import Layout from "../../layouts/Layout.astro";
import Navbar from "../../components/Navbar.astro";
import Footer from "../../components/Footer.astro";
---

<Layout title="Lorem Ipsum Generator | Portal Online">
    <Navbar />

    <main class="lip-page">
        <!-- Background Decorations -->
        <div class="lip-bg-glow">
            <div
                class="cosmic-glow cosmic-glow-primary animate-float-slow"
                style="top: 15%; left: 5%; width: 500px; height: 500px; opacity: 0.35;"
            >
            </div>
            <div
                class="cosmic-glow cosmic-glow-accent animate-float-slow delay-500"
                style="bottom: 10%; right: 5%; width: 400px; height: 400px; opacity: 0.25;"
            >
            </div>
        </div>

        <div class="lip-wrapper">
            <!-- Header -->
            <div class="lip-header animate-fade-in">
                <span class="badge">Free Tool</span>
                <h1
                    class="section-title text-balance"
                    style="text-align:center;"
                >
                    Lorem Ipsum <span class="text-gradient">Generator</span>
                </h1>
                <p class="lip-subtitle">
                    Generate placeholder text for your designs, mockups, and
                    prototypes. Customize paragraphs, sentences, and word
                    counts.
                </p>
            </div>

            <!-- Controls Card -->
            <div class="lip-card glass animate-slide-up">
                <!-- Paragraphs Slider -->
                <div class="lip-control">
                    <div class="lip-control-header">
                        <label for="paragraphs" class="lip-label"
                            >Paragraphs</label
                        >
                        <span id="paragraphs-val" class="lip-val">5</span>
                    </div>
                    <input
                        type="range"
                        id="paragraphs"
                        min="1"
                        max="20"
                        value="5"
                        class="lip-range"
                    />
                </div>

                <!-- Sentences Slider -->
                <div class="lip-control">
                    <div class="lip-control-header">
                        <label for="sentences" class="lip-label"
                            >Sentences per paragraph</label
                        >
                        <span id="sentences-val" class="lip-val">6</span>
                    </div>
                    <input
                        type="range"
                        id="sentences"
                        min="2"
                        max="15"
                        value="6"
                        class="lip-range"
                    />
                </div>

                <!-- Words Slider -->
                <div class="lip-control">
                    <div class="lip-control-header">
                        <label for="words" class="lip-label"
                            >Words per sentence</label
                        >
                        <span id="words-val" class="lip-val">10</span>
                    </div>
                    <input
                        type="range"
                        id="words"
                        min="4"
                        max="20"
                        value="10"
                        class="lip-range"
                    />
                </div>

                <!-- Toggle: Start with Lorem Ipsum -->
                <div class="lip-toggle-row">
                    <label for="startLorem" class="lip-label"
                        >Start with "Lorem ipsum…"?</label
                    >
                    <label class="lip-switch">
                        <input type="checkbox" id="startLorem" checked />
                        <span class="lip-slider"></span>
                    </label>
                </div>

                <!-- Toggle: As HTML -->
                <div class="lip-toggle-row">
                    <label for="asHtml" class="lip-label">As HTML?</label>
                    <label class="lip-switch">
                        <input type="checkbox" id="asHtml" />
                        <span class="lip-slider"></span>
                    </label>
                </div>

                <!-- Buttons -->
                <div class="lip-actions">
                    <button id="generateBtn" class="btn btn-gradient lip-btn">
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="18"
                            height="18"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            ><path
                                d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"
                            ></path></svg
                        >
                        Generate
                    </button>
                    <button id="copyBtn" class="btn btn-secondary lip-btn">
                        <svg
                            id="copyIcon"
                            xmlns="http://www.w3.org/2000/svg"
                            width="18"
                            height="18"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            ><rect
                                width="14"
                                height="14"
                                x="8"
                                y="8"
                                rx="2"
                                ry="2"></rect><path
                                d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"
                            ></path></svg
                        >
                        <svg
                            id="checkIcon"
                            xmlns="http://www.w3.org/2000/svg"
                            width="18"
                            height="18"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            style="display:none;"
                            ><polyline points="20 6 9 17 4 12"></polyline></svg
                        >
                        <span id="copyLabel">Copy</span>
                    </button>
                </div>
            </div>

            <!-- Output Card -->
            <div class="lip-card glass animate-slide-up delay-200">
                <div class="lip-output-header">
                    <span class="lip-output-title">
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            ><path
                                d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
                            ></path><polyline points="14 2 14 8 20 8"
                            ></polyline><line x1="16" y1="13" x2="8" y2="13"
                            ></line><line x1="16" y1="17" x2="8" y2="17"
                            ></line><polyline points="10 9 9 9 8 9"
                            ></polyline></svg
                        >
                        Generated Text
                    </span>
                    <span id="wordCount" class="lip-word-count">0 words</span>
                </div>
                <div id="output" class="lip-output"></div>
            </div>

            <!-- Stats -->
            <div class="lip-stats animate-fade-in delay-300">
                <div class="lip-stat glass-light">
                    <div
                        class="lip-stat-val"
                        style="color: rgb(var(--color-primary));"
                    >
                        ∞
                    </div>
                    <div class="lip-stat-lbl">Variations</div>
                </div>
                <div class="lip-stat glass-light">
                    <div
                        class="lip-stat-val"
                        style="color: rgb(var(--color-accent));"
                    >
                        Fast
                    </div>
                    <div class="lip-stat-lbl">Generation</div>
                </div>
                <div class="lip-stat glass-light">
                    <div
                        class="lip-stat-val"
                        style="color: rgb(var(--color-pink));"
                    >
                        100%
                    </div>
                    <div class="lip-stat-lbl">Free to Use</div>
                </div>
            </div>
        </div>
    </main>

    <Footer />
</Layout>

<style is:global>
    /* ── Page Layout ────────────────────────────── */
    .lip-page {
        padding-top: 140px;
        padding-bottom: 5rem;
        min-height: 100vh;
        position: relative;
        overflow: hidden;
    }
    .lip-bg-glow {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 0;
    }
    .lip-wrapper {
        position: relative;
        z-index: 1;
        max-width: 700px;
        margin: 0 auto;
        padding: 0 1.25rem;
    }

    /* ── Header ─────────────────────────────────── */
    .lip-header {
        text-align: center;
        margin-bottom: 2.5rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.75rem;
    }
    .lip-subtitle {
        color: var(--color-text-muted);
        font-size: 1.05rem;
        line-height: 1.6;
        max-width: 520px;
    }

    /* ── Card ───────────────────────────────────── */
    .lip-card {
        border-radius: 1.25rem;
        padding: 2rem;
        margin-bottom: 2rem;
    }
    @media (min-width: 640px) {
        .lip-card {
            padding: 2.5rem;
        }
    }

    /* ── Controls ───────────────────────────────── */
    .lip-control {
        margin-bottom: 1.5rem;
    }
    .lip-control-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.5rem;
    }
    .lip-label {
        font-size: 0.8rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        color: var(--color-text-muted);
    }
    .lip-val {
        font-family: var(--font-display);
        font-weight: 700;
        font-size: 0.95rem;
        color: rgb(var(--color-primary));
        min-width: 2rem;
        text-align: right;
        font-variant-numeric: tabular-nums;
    }

    /* ── Range Slider ──────────────────────────── */
    .lip-range {
        -webkit-appearance: none;
        appearance: none;
        width: 100%;
        height: 6px;
        background: var(--color-bg-secondary);
        border-radius: 999px;
        outline: none;
        cursor: pointer;
        transition: background var(--transition-fast);
    }
    .lip-range::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: linear-gradient(
            135deg,
            rgb(var(--color-primary)),
            rgb(var(--color-accent))
        );
        border: 2px solid var(--color-bg);
        box-shadow:
            0 0 10px rgba(var(--color-primary), 0.4),
            0 2px 6px rgba(0, 0, 0, 0.3);
        cursor: pointer;
        transition: transform var(--transition-fast);
    }
    .lip-range::-webkit-slider-thumb:hover {
        transform: scale(1.15);
    }
    .lip-range::-moz-range-thumb {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: linear-gradient(
            135deg,
            rgb(var(--color-primary)),
            rgb(var(--color-accent))
        );
        border: 2px solid var(--color-bg);
        box-shadow:
            0 0 10px rgba(var(--color-primary), 0.4),
            0 2px 6px rgba(0, 0, 0, 0.3);
        cursor: pointer;
    }
    .lip-range::-moz-range-track {
        height: 6px;
        background: var(--color-bg-secondary);
        border-radius: 999px;
    }

    /* ── Toggle Switch ─────────────────────────── */
    .lip-toggle-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.75rem 0;
        border-top: 1px solid var(--color-border-light);
    }
    .lip-switch {
        position: relative;
        display: inline-block;
        width: 48px;
        height: 26px;
        flex-shrink: 0;
    }
    .lip-switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }
    .lip-slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: var(--color-bg-secondary);
        border: 1px solid var(--color-border);
        border-radius: 999px;
        transition: all var(--transition-base);
    }
    .lip-slider::before {
        content: "";
        position: absolute;
        height: 18px;
        width: 18px;
        left: 3px;
        bottom: 3px;
        background: var(--color-text-subtle);
        border-radius: 50%;
        transition: all var(--transition-base);
    }
    .lip-switch input:checked + .lip-slider {
        background: rgba(var(--color-primary), 0.2);
        border-color: rgba(var(--color-primary), 0.5);
    }
    .lip-switch input:checked + .lip-slider::before {
        transform: translateX(22px);
        background: rgb(var(--color-primary));
        box-shadow: 0 0 8px rgba(var(--color-primary), 0.5);
    }

    /* ── Buttons ────────────────────────────────── */
    .lip-actions {
        display: flex;
        gap: 0.75rem;
        margin-top: 1.5rem;
    }
    .lip-btn {
        flex: 1;
        padding: 0.85rem 1.25rem;
        font-size: 0.9rem;
        cursor: pointer;
    }
    .lip-btn svg {
        flex-shrink: 0;
    }

    /* ── Output ─────────────────────────────────── */
    .lip-output-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }
    .lip-output-title {
        display: flex;
        align-items: center;
        gap: 0.4rem;
        font-size: 0.85rem;
        font-weight: 600;
        color: var(--color-text-muted);
    }
    .lip-word-count {
        font-size: 0.8rem;
        font-weight: 700;
        color: rgb(var(--color-primary));
        font-variant-numeric: tabular-nums;
    }
    .lip-output {
        max-height: 420px;
        overflow-y: auto;
        padding: 1.25rem;
        background: var(--color-bg-secondary);
        border: 1px solid var(--color-border-light);
        border-radius: 0.75rem;
        font-size: 0.9rem;
        line-height: 1.75;
        color: var(--color-text-muted);
        white-space: pre-wrap;
        word-wrap: break-word;
    }
    .lip-output p {
        margin-bottom: 1rem;
    }
    .lip-output p:last-child {
        margin-bottom: 0;
    }
    .lip-output::-webkit-scrollbar {
        width: 4px;
    }
    .lip-output::-webkit-scrollbar-track {
        background: transparent;
    }
    .lip-output::-webkit-scrollbar-thumb {
        background: rgba(var(--color-primary), 0.3);
        border-radius: 999px;
    }

    /* ── Stats ──────────────────────────────────── */
    .lip-stats {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1rem;
    }
    .lip-stat {
        text-align: center;
        padding: 1.25rem 0.75rem;
        border-radius: 1rem;
    }
    .lip-stat-val {
        font-family: var(--font-display);
        font-size: 1.75rem;
        font-weight: 800;
        line-height: 1;
        margin-bottom: 0.35rem;
    }
    .lip-stat-lbl {
        font-size: 0.7rem;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        color: var(--color-text-subtle);
        font-weight: 600;
    }

    /* ── Copy feedback ─────────────────────────── */
    .lip-btn.copied {
        border-color: #22c55e;
        color: #22c55e;
    }

    @media (max-width: 480px) {
        .lip-stats {
            grid-template-columns: 1fr;
        }
        .lip-actions {
            flex-direction: column;
        }
    }
</style>

<script>
    document.addEventListener("astro:page-load", () => {
        // ── Latin word bank ──────────────────────
        const WORDS = [
            "lorem",
            "ipsum",
            "dolor",
            "sit",
            "amet",
            "consectetur",
            "adipiscing",
            "elit",
            "sed",
            "do",
            "eiusmod",
            "tempor",
            "incididunt",
            "ut",
            "labore",
            "et",
            "dolore",
            "magna",
            "aliqua",
            "enim",
            "ad",
            "minim",
            "veniam",
            "quis",
            "nostrud",
            "exercitation",
            "ullamco",
            "laboris",
            "nisi",
            "aliquip",
            "ex",
            "ea",
            "commodo",
            "consequat",
            "duis",
            "aute",
            "irure",
            "in",
            "reprehenderit",
            "voluptate",
            "velit",
            "esse",
            "cillum",
            "fugiat",
            "nulla",
            "pariatur",
            "excepteur",
            "sint",
            "occaecat",
            "cupidatat",
            "non",
            "proident",
            "sunt",
            "culpa",
            "qui",
            "officia",
            "deserunt",
            "mollit",
            "anim",
            "id",
            "est",
            "laborum",
            "porta",
            "nibh",
            "venenatis",
            "cras",
            "fermentum",
            "odio",
            "eu",
            "feugiat",
            "pretium",
            "facilisis",
            "mauris",
            "massa",
            "vitae",
            "tortor",
            "condimentum",
            "lacinia",
            "viverra",
            "tellus",
            "pellentesque",
            "habitant",
            "morbi",
            "tristique",
            "senectus",
            "netus",
            "malesuada",
            "fames",
            "turpis",
            "egestas",
            "maecenas",
            "pharetra",
            "convallis",
            "posuere",
            "urna",
            "nec",
            "tincidunt",
            "praesent",
            "semper",
            "dignissim",
            "suspendisse",
            "potenti",
            "nunc",
            "lobortis",
            "mattis",
            "aliquam",
            "faucibus",
            "purus",
            "iaculis",
            "ornare",
            "diam",
            "blandit",
            "cursus",
            "risus",
            "placerat",
            "auctor",
            "augue",
            "neque",
            "gravida",
            "primis",
            "orci",
            "luctus",
            "ultrices",
            "cubilia",
            "curae",
            "proin",
            "sapien",
            "eget",
            "mi",
            "accumsan",
            "donec",
            "imperdiet",
            "quam",
            "vel",
            "eros",
            "ligula",
            "sollicitudin",
            "vehicula",
            "integer",
            "rutrum",
            "ante",
            "arcu",
            "volutpat",
            "dapibus",
            "bibendum",
            "elementum",
            "leo",
            "sodales",
            "scelerisque",
            "euismod",
            "metus",
            "dictum",
            "pulvinar",
            "tempus",
            "finibus",
            "maximus",
            "interdum",
            "nam",
            "libero",
            "justo",
            "laoreet",
            "congue",
            "fusce",
            "hendrerit",
            "nisl",
            "rhoncus",
            "vulputate",
            "sagittis",
            "etiam",
            "molestie",
            "lectus",
            "torquent",
            "per",
            "conubia",
            "nostra",
            "inceptos",
            "himenaeos",
            "vivamus",
            "suscipit",
            "erat",
            "ac",
            "nullam",
            "commodi",
            "platea",
            "dictumst",
            "hac",
            "habitasse",
            "aptent",
            "taciti",
            "sociosqu",
            "litora",
            "natoque",
            "penatibus",
            "magnis",
            "dis",
            "parturient",
            "montes",
            "nascetur",
            "ridiculus",
            "mus",
            "fringilla",
            "consequuntur",
            "voluptatem",
            "accusantium",
            "doloremque",
            "laudantium",
            "totam",
            "rem",
            "aperiam",
            "eaque",
            "ipsa",
            "quae",
            "inventore",
            "veritatis",
            "quasi",
            "architecto",
            "beatae",
            "unde",
            "omnis",
            "iste",
            "natus",
            "error",
            "voluptatibus",
            "nemo",
            "nesciunt",
            "nemore",
            "perspiciatis",
        ];

        const LOREM_START =
            "Lorem ipsum dolor sit amet, consectetur adipiscing elit. ";

        // ── Elements ─────────────────────────────
        const paragraphsEl = document.getElementById(
            "paragraphs",
        ) as HTMLInputElement | null;
        const sentencesEl = document.getElementById(
            "sentences",
        ) as HTMLInputElement | null;
        const wordsEl = document.getElementById(
            "words",
        ) as HTMLInputElement | null;
        const startLoremEl = document.getElementById(
            "startLorem",
        ) as HTMLInputElement | null;
        const asHtmlEl = document.getElementById(
            "asHtml",
        ) as HTMLInputElement | null;
        const generateBtn = document.getElementById("generateBtn");
        const copyBtn = document.getElementById("copyBtn");
        const copyIcon = document.getElementById(
            "copyIcon",
        ) as HTMLElement | null;
        const checkIcon = document.getElementById(
            "checkIcon",
        ) as HTMLElement | null;
        const copyLabel = document.getElementById("copyLabel");
        const outputEl = document.getElementById("output");
        const wordCountEl = document.getElementById("wordCount");
        const paragraphsVal = document.getElementById("paragraphs-val");
        const sentencesVal = document.getElementById("sentences-val");
        const wordsVal = document.getElementById("words-val");

        if (
            !paragraphsEl ||
            !sentencesEl ||
            !wordsEl ||
            !startLoremEl ||
            !asHtmlEl ||
            !outputEl ||
            !generateBtn ||
            !copyBtn ||
            !copyIcon ||
            !checkIcon ||
            !copyLabel ||
            !wordCountEl ||
            !paragraphsVal ||
            !sentencesVal ||
            !wordsVal
        )
            return;

        // ── Helpers ──────────────────────────────
        function randomWord(): string {
            return WORDS[Math.floor(Math.random() * WORDS.length)];
        }

        function capitalize(str: string): string {
            return str.charAt(0).toUpperCase() + str.slice(1);
        }

        function generateSentence(wordCount: number): string {
            const w: string[] = [];
            for (let i = 0; i < wordCount; i++) {
                w.push(randomWord());
            }
            return capitalize(w.join(" ")) + ".";
        }

        function generateParagraph(
            sentenceCount: number,
            wordCount: number,
        ): string {
            const s: string[] = [];
            for (let i = 0; i < sentenceCount; i++) {
                s.push(generateSentence(wordCount));
            }
            return s.join(" ");
        }

        function countWords(text: string): number {
            return text
                .replace(/<[^>]*>/g, " ")
                .split(/\s+/)
                .filter((w: string) => w.length > 0).length;
        }

        // ── Main generate ────────────────────────
        function generate() {
            const numParagraphs = parseInt(paragraphsEl!.value);
            const numSentences = parseInt(sentencesEl!.value);
            const numWords = parseInt(wordsEl!.value);
            const startWithLorem = startLoremEl!.checked;
            const asHtml = asHtmlEl!.checked;

            const paragraphs: string[] = [];
            for (let i = 0; i < numParagraphs; i++) {
                let p = generateParagraph(numSentences, numWords);
                if (i === 0 && startWithLorem) {
                    p = LOREM_START + p;
                }
                paragraphs.push(p);
            }

            let result: string;
            if (asHtml) {
                result = paragraphs.map((p) => `<p>${p}</p>`).join("\n");
                outputEl!.textContent = result;
            } else {
                result = paragraphs.join("\n\n");
                outputEl!.innerHTML = paragraphs
                    .map((p) => `<p>${p}</p>`)
                    .join("");
            }

            const wc = countWords(result);
            wordCountEl!.textContent = wc + " word" + (wc !== 1 ? "s" : "");
        }

        // ── Slider value display ─────────────────
        function updateSliderDisplays() {
            paragraphsVal!.textContent = paragraphsEl!.value;
            sentencesVal!.textContent = sentencesEl!.value;
            wordsVal!.textContent = wordsEl!.value;
        }

        // ── Event listeners ──────────────────────
        [paragraphsEl, sentencesEl, wordsEl].forEach((el) => {
            el!.addEventListener("input", () => {
                updateSliderDisplays();
                generate();
            });
        });

        [startLoremEl, asHtmlEl].forEach((el) => {
            el!.addEventListener("change", generate);
        });

        generateBtn!.addEventListener("click", generate);

        copyBtn!.addEventListener("click", async () => {
            const text = outputEl!.textContent || outputEl!.innerText;
            try {
                await navigator.clipboard.writeText(text);
                copyIcon!.style.display = "none";
                checkIcon!.style.display = "inline";
                copyLabel!.textContent = "Copied!";
                copyBtn!.classList.add("copied");

                setTimeout(() => {
                    copyIcon!.style.display = "inline";
                    checkIcon!.style.display = "none";
                    copyLabel!.textContent = "Copy";
                    copyBtn!.classList.remove("copied");
                }, 2000);
            } catch {
                // Clipboard API not available — show simple feedback
                if (copyLabel) copyLabel.textContent = "Gagal menyalin";
                setTimeout(() => {
                    if (copyLabel) copyLabel.textContent = "Copy";
                }, 2000);
            }
        });

        // ── Initial generation ───────────────────
        updateSliderDisplays();
        generate();
    });
</script>
